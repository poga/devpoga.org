<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Learning Julia, Line by Line | Dev.Poga</title>
<meta name="title" content="Learning Julia, Line by Line" />
<meta name="description" content="Cardsjl is a simple Julia package which demonstrate many interesting bits of the Julia Programming Language.
Reading it is an enjoyable experience. The note I&rsquo;ve writtend down is here:" />
<meta name="keywords" content="Notes,Programming,Julia," />


<meta property="og:title" content="Learning Julia, Line by Line" />
<meta property="og:description" content="Cardsjl is a simple Julia package which demonstrate many interesting bits of the Julia Programming Language.
Reading it is an enjoyable experience. The note I&rsquo;ve writtend down is here:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://devpoga.org/blog/2021-08-04_learning_julia_line_by_line/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-08-04T00:00:00+08:00" />
<meta property="article:modified_time" content="2021-08-04T00:00:00+08:00" />




<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Learning Julia, Line by Line"/>
<meta name="twitter:description" content="Cardsjl is a simple Julia package which demonstrate many interesting bits of the Julia Programming Language.
Reading it is an enjoyable experience. The note I&rsquo;ve writtend down is here:"/>



<meta itemprop="name" content="Learning Julia, Line by Line">
<meta itemprop="description" content="Cardsjl is a simple Julia package which demonstrate many interesting bits of the Julia Programming Language.
Reading it is an enjoyable experience. The note I&rsquo;ve writtend down is here:"><meta itemprop="datePublished" content="2021-08-04T00:00:00+08:00" />
<meta itemprop="dateModified" content="2021-08-04T00:00:00+08:00" />
<meta itemprop="wordCount" content="1538">
<meta itemprop="keywords" content="Notes,Programming,Julia," />
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
  }

  div.highlight pre {
    background-color: initial;
    color: initial;
  }

  div.highlight code {
    background-color: unset;
    color: unset;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>
<link rel="stylesheet" href="/custom.css">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-FEFM53H9Y9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FEFM53H9Y9');
</script>
</head>

<body>
  <header><a href="/" class="title">
  <h2>Dev.Poga</h2>
</a>
<nav><a href="/">Home</a>


<a href="/blog">Blog</a>

</nav>
</header>
  <main>

<h1>Learning Julia, Line by Line</h1>
<p>
  <i>
    <time datetime='2021-08-04' pubdate>
      04 Aug, 2021
    </time>
  </i>
</p>

<content>
  <p><a href="https://github.com/StefanKarpinski/Cards.jl">Cardsjl</a> is a simple Julia package which demonstrate many interesting bits of the <a href="https://julialang.org/">Julia Programming Language</a>.</p>
<p>Reading it is an enjoyable experience. The note I&rsquo;ve writtend down is here:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-julia" data-lang="julia"><span style="display:flex;"><span><span style="color:#75715e"># import base multiply(*), bitwise-or(|), and bitwise-and(&amp;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In Julia, you can load modules with `using` or `import`. The difference is that</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># * `using` will load the module **and** reexport the loaded module into the surrounding global</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    namespace.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># * `import` will only load the module and rexport the module name to the scope.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> Base<span style="color:#f92672">:</span> <span style="color:#f92672">*</span>, <span style="color:#f92672">|</span>, <span style="color:#f92672">&amp;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Encode a suit as a 2-bit value (low bits of a `UInt8`):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- 0 = ♣ (clubs)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- 1 = ♢ (diamonds)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- 2 = ♡ (hearts)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- 3 = ♠ (spades)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">The suits have global constant bindings: `♣`, `♢`, `♡`, `♠`.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Here we define a struct `Suit`. A `Suit` contains a `i` variable with type`UInt8`</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In Julia, type objects are constructor functions. We can create new instance of the struct</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># via calling the function `suit = Suit(0)`</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#66d9ef">Suit</span>
</span></span><span style="display:flex;"><span>  i<span style="color:#f92672">::</span><span style="color:#66d9ef">UInt8</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Here, we define an &#34;Inner Constructor Method&#34; to define constraints for the constructor</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># This is also a neat example of Julia&#39;s unicode support. Yes, we can use ≤ as `&lt;=`.</span>
</span></span><span style="display:flex;"><span>  Suit(s<span style="color:#f92672">::</span><span style="color:#66d9ef">Integer</span>) <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">≤</span> s <span style="color:#f92672">≤</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">?</span> new(s) <span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  throw(<span style="color:#66d9ef">ArgumentError</span>(<span style="color:#e6db74">&#34;invalid suit number: </span><span style="color:#e6db74">$s</span><span style="color:#e6db74">&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Julia&#39;s abstraction is mostly powered by multiple dispatch.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Here we define a &#34;new dispatch&#34; for `char()` function to convert normal characters to a Suit.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Therefore, whenever the `char()` function is applied with a `Suit`, this dispatch will be used.</span>
</span></span><span style="display:flex;"><span>char(s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>) <span style="color:#f92672">=</span> <span style="color:#66d9ef">Char</span>(<span style="color:#ae81ff">0x2663</span><span style="color:#f92672">-</span>s<span style="color:#f92672">.</span>i)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ... and some other helpers. They&#39;re surprisingly self-explanatory</span>
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>string(s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>) <span style="color:#f92672">=</span> string(char(s))
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>show(io<span style="color:#f92672">::</span><span style="color:#66d9ef">IO</span>, s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>) <span style="color:#f92672">=</span> print(io, char(s))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In a normal poker deck, there&#39;s only 4 possible suits</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We can write readable codes with the power of unicode symbols in Julia</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> ♣ <span style="color:#f92672">=</span> Suit(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> ♢ <span style="color:#f92672">=</span> Suit(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> ♡ <span style="color:#f92672">=</span> Suit(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> ♠ <span style="color:#f92672">=</span> Suit(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> suits <span style="color:#f92672">=</span> [♣, ♢, ♡, ♠]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Encode a playing card as a 6-bit integer (low bits of a `UInt8`):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- low bits represent rank from 0 to 15
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- high bits represent suit (♣, ♢, ♡ or ♠)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Ranks are assigned as follows:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- numbered cards (2 to 10) have rank equal to their number
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- jacks, queens and kings have ranks 11, 12 and 13
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- there are low and high aces with ranks 1 and 14
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- there are low and high jokers with ranks 0 and 15
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">This allows any of the standard orderings of cards ranks to be
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">achieved simply by choosing which aces or which jokers to use.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">There are a total of 64 possible card values with this scheme,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">represented by `UInt8` values `0x00` through `0x3f`.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># A Card is a struct which encode the suit and the rank into a single UInt8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In most high-level languages, this would be kinda tedious to define.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># However, Julia demonstrated its expressiveness straight to the lowest level here.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#66d9ef">Card</span>
</span></span><span style="display:flex;"><span>  value<span style="color:#f92672">::</span><span style="color:#66d9ef">UInt8</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We create a new dispatch for `Card`&#39;s constructor.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It will encode the rank and the suit into the UInt8</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> Card(r<span style="color:#f92672">::</span><span style="color:#66d9ef">Integer</span>, s<span style="color:#f92672">::</span><span style="color:#66d9ef">Integer</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">0</span> <span style="color:#f92672">≤</span> r <span style="color:#f92672">≤</span> <span style="color:#ae81ff">15</span> <span style="color:#f92672">||</span> throw(<span style="color:#66d9ef">ArgumentError</span>(<span style="color:#e6db74">&#34;invalid card rank: </span><span style="color:#e6db74">$r</span><span style="color:#e6db74">&#34;</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> Card(((s <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">4</span>) <span style="color:#f92672">%</span> <span style="color:#66d9ef">UInt8</span>) <span style="color:#f92672">|</span> (r <span style="color:#f92672">%</span> <span style="color:#66d9ef">UInt8</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Another dispath when a suit is given instead of an integer for suit</span>
</span></span><span style="display:flex;"><span>Card(r<span style="color:#f92672">::</span><span style="color:#66d9ef">Integer</span>, s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>) <span style="color:#f92672">=</span> Card(r, s<span style="color:#f92672">.</span>i)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># These are getters for getting the rank or suit from a card</span>
</span></span><span style="display:flex;"><span>suit(c<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span>) <span style="color:#f92672">=</span> Suit((<span style="color:#ae81ff">0x30</span> <span style="color:#f92672">&amp;</span> c<span style="color:#f92672">.</span>value) <span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>rank(c<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span>) <span style="color:#f92672">=</span> (c<span style="color:#f92672">.</span>value <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">0x0f</span>) <span style="color:#f92672">%</span> <span style="color:#66d9ef">Int8</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Lets define a new dispatch for Base.show to make it looks good when printed.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> Base<span style="color:#f92672">.</span>show(io<span style="color:#f92672">::</span><span style="color:#66d9ef">IO</span>, c<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span>)
</span></span><span style="display:flex;"><span>  r <span style="color:#f92672">=</span> rank(c)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">≤</span> r <span style="color:#f92672">≤</span> <span style="color:#ae81ff">14</span>
</span></span><span style="display:flex;"><span>    r <span style="color:#f92672">==</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">&amp;&amp;</span> print(io, <span style="color:#e6db74">&#39;1&#39;</span>)
</span></span><span style="display:flex;"><span>    print(io, <span style="color:#e6db74">&#34;1234567890JQKA&#34;</span>[r])
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    print(io, <span style="color:#e6db74">&#39;\U1f0cf&#39;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  print(io, suit(c))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In Julia, `2 * x` can be written as `2x`.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># By creating a new dispatch for the multiply operator `*`, we can write `2♣`</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and it will automatically converted to `Card(2, ♣)`. WOW fancy.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>(r<span style="color:#f92672">::</span><span style="color:#66d9ef">Integer</span>, s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>) <span style="color:#f92672">=</span> Card(r, s)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># However, &#34;J♣&#34; will not be treated as a multipication.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Here we use `@eval` macro to create these variables as consts.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># such lispy. I like it.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> s <span style="color:#66d9ef">in</span> <span style="color:#e6db74">&#34;♣♢♡♠&#34;</span>, (r,f) <span style="color:#66d9ef">in</span> zip(<span style="color:#ae81ff">11</span><span style="color:#f92672">:</span><span style="color:#ae81ff">14</span>, <span style="color:#e6db74">&#34;JQKA&#34;</span>)
</span></span><span style="display:flex;"><span>  ss, sc <span style="color:#f92672">=</span> <span style="color:#66d9ef">Symbol</span>(s), <span style="color:#66d9ef">Symbol</span>(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$f$s</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@eval</span> (<span style="color:#66d9ef">export</span> <span style="color:#f92672">$</span>sc; <span style="color:#66d9ef">const</span> <span style="color:#f92672">$</span>sc <span style="color:#f92672">=</span> Card(<span style="color:#f92672">$</span>r,<span style="color:#f92672">$</span>ss))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Represent a hand (set) of cards using a `UInt64` bit set.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># we use an `UInt64` bit set to store what cards are presented in a hand</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># since there&#39;s only 52 cards in a deck.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We use `&lt;:` to indicate that a `Hand` is a subtype of a `AbstractSet{Card}`.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Therefore, `Hand` can be used with all functions with compatiable dispatch to an `AbstractSet`.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#66d9ef">Hand</span> <span style="color:#f92672">&lt;:</span> <span style="color:#66d9ef">AbstractSet</span>{<span style="color:#66d9ef">Card</span>}
</span></span><span style="display:flex;"><span>  cards<span style="color:#f92672">::</span><span style="color:#66d9ef">UInt64</span>
</span></span><span style="display:flex;"><span>  Hand(cards<span style="color:#f92672">::</span><span style="color:#66d9ef">UInt64</span>) <span style="color:#f92672">=</span> new(cards)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># convert card value to bit	set position</span>
</span></span><span style="display:flex;"><span>bit(c<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span>) <span style="color:#f92672">=</span> one(<span style="color:#66d9ef">UInt64</span>) <span style="color:#f92672">&lt;&lt;</span> c<span style="color:#f92672">.</span>value
</span></span><span style="display:flex;"><span><span style="color:#75715e"># convert suit to bit set range</span>
</span></span><span style="display:flex;"><span>bits(s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>) <span style="color:#f92672">=</span> <span style="color:#66d9ef">UInt64</span>(<span style="color:#ae81ff">0xffff</span>) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">16</span>(s<span style="color:#f92672">.</span>i)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a simple constructor to convert a set of cards to a bit set</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> Hand(cards)
</span></span><span style="display:flex;"><span>  hand <span style="color:#f92672">=</span> Hand(zero(<span style="color:#66d9ef">UInt64</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> card <span style="color:#66d9ef">in</span> cards
</span></span><span style="display:flex;"><span>    card <span style="color:#66d9ef">isa</span> Card <span style="color:#f92672">||</span> throw(<span style="color:#66d9ef">ArgumentError</span>(<span style="color:#e6db74">&#34;not a card: </span><span style="color:#e6db74">$repr</span><span style="color:#e6db74">(card)&#34;</span>))
</span></span><span style="display:flex;"><span>    i <span style="color:#f92672">=</span> bit(card)
</span></span><span style="display:flex;"><span>    hand<span style="color:#f92672">.</span>cards <span style="color:#f92672">&amp;</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> throw(<span style="color:#66d9ef">ArgumentError</span>(<span style="color:#e6db74">&#34;duplicate cards are not supported&#34;</span>))
</span></span><span style="display:flex;"><span>    hand <span style="color:#f92672">=</span> Hand(hand<span style="color:#f92672">.</span>cards <span style="color:#f92672">|</span> i)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> hand
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Some more dispatches for our Hand type</span>
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span><span style="color:#66d9ef">in</span>(c<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span>, h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>) <span style="color:#f92672">=</span> (bit(c) <span style="color:#f92672">&amp;</span> h<span style="color:#f92672">.</span>cards) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>length(h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>) <span style="color:#f92672">=</span> count_ones(h<span style="color:#f92672">.</span>cards)
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>isempty(h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>) <span style="color:#f92672">=</span> h<span style="color:#f92672">.</span>cards <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>lastindex(h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>) <span style="color:#f92672">=</span> length(h)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define an iterator for our Hand.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We can define a parameter with default value with the syntax introduced here</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> Base<span style="color:#f92672">.</span>iterate(h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>, s<span style="color:#f92672">::</span><span style="color:#66d9ef">UInt8</span> <span style="color:#f92672">=</span> trailing_zeros(h<span style="color:#f92672">.</span>cards) <span style="color:#f92672">%</span> <span style="color:#66d9ef">UInt8</span>)
</span></span><span style="display:flex;"><span>  (h<span style="color:#f92672">.</span>cards <span style="color:#f92672">&gt;&gt;&gt;</span> s) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">return</span> nothing
</span></span><span style="display:flex;"><span>  c <span style="color:#f92672">=</span> Card(s); s <span style="color:#f92672">+=</span> true
</span></span><span style="display:flex;"><span>  c, s <span style="color:#f92672">+</span> trailing_zeros(h<span style="color:#f92672">.</span>cards <span style="color:#f92672">&gt;&gt;&gt;</span> s) <span style="color:#f92672">%</span> <span style="color:#66d9ef">UInt8</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a non-bound-checked function to get a Card from a Hand</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> Base<span style="color:#f92672">.</span>unsafe_getindex(h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>, i<span style="color:#f92672">::</span><span style="color:#66d9ef">UInt8</span>)
</span></span><span style="display:flex;"><span>  card, s <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0</span>, <span style="color:#ae81ff">0x5</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span> true
</span></span><span style="display:flex;"><span>    mask <span style="color:#f92672">=</span> <span style="color:#ae81ff">0xffff_ffff_ffff_ffff</span> <span style="color:#f92672">&gt;&gt;</span> (<span style="color:#ae81ff">0x40</span> <span style="color:#f92672">-</span> (<span style="color:#ae81ff">0x1</span><span style="color:#f92672">&lt;&lt;</span>s) <span style="color:#f92672">-</span> card)
</span></span><span style="display:flex;"><span>    card <span style="color:#f92672">+=</span> <span style="color:#66d9ef">UInt8</span>(i <span style="color:#f92672">&gt;</span> count_ones(h<span style="color:#f92672">.</span>cards <span style="color:#f92672">&amp;</span> mask) <span style="color:#f92672">%</span> <span style="color:#66d9ef">UInt8</span>) <span style="color:#f92672">&lt;&lt;</span> s
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">-=</span> <span style="color:#ae81ff">0x1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> Card(card)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># To avoid having to convert from UInt8 to Integer constantly,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># we create a new dispatch for our unsafe_getindex for all Integeres</span>
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>unsafe_getindex(h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>, i<span style="color:#f92672">::</span><span style="color:#66d9ef">Integer</span>) <span style="color:#f92672">=</span> Base<span style="color:#f92672">.</span>unsafe_getindex(h, i <span style="color:#f92672">%</span> <span style="color:#66d9ef">UInt8</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Finally, we wrap our not-so-safe fuction with a bounded-checked `getindex` function</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> Base<span style="color:#f92672">.</span>getindex(h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>, i<span style="color:#f92672">::</span><span style="color:#66d9ef">Integer</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># The `@boundscheck` macro allows the bound check to be ignored with `@inbound` macro</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@boundscheck</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">≤</span> i <span style="color:#f92672">≤</span> length(h) <span style="color:#f92672">||</span> throw(<span style="color:#66d9ef">BoundsError</span>(h,i))
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> Base<span style="color:#f92672">.</span>unsafe_getindex(h, i)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Make a `Hand` looks nice when printed</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> Base<span style="color:#f92672">.</span>show(io<span style="color:#f92672">::</span><span style="color:#66d9ef">IO</span>, hand<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> isempty(hand) <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>get(io, <span style="color:#e6db74">:compact</span>, false)
</span></span><span style="display:flex;"><span>    print(io, <span style="color:#e6db74">&#34;Hand([&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> card <span style="color:#66d9ef">in</span> hand
</span></span><span style="display:flex;"><span>      print(io, card)
</span></span><span style="display:flex;"><span>      (bit(card) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">≤</span> hand<span style="color:#f92672">.</span>cards <span style="color:#f92672">&amp;&amp;</span> print(io, <span style="color:#e6db74">&#34;, &#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    print(io, <span style="color:#e6db74">&#34;])&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> suit <span style="color:#66d9ef">in</span> suits
</span></span><span style="display:flex;"><span>      s <span style="color:#f92672">=</span> hand <span style="color:#f92672">&amp;</span> suit
</span></span><span style="display:flex;"><span>      isempty(s) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>      show(io, suit)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">for</span> card <span style="color:#66d9ef">in</span> s
</span></span><span style="display:flex;"><span>        r <span style="color:#f92672">=</span> rank(card)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> r <span style="color:#f92672">==</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>          print(io, <span style="color:#e6db74">&#39;\u2491&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elseif</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">≤</span> r <span style="color:#f92672">≤</span> <span style="color:#ae81ff">14</span>
</span></span><span style="display:flex;"><span>          print(io, <span style="color:#e6db74">&#34;1234567890JQKA&#34;</span>[r])
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>          print(io, <span style="color:#e6db74">&#39;\U1f0cf&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># More dispatch to allow us to combine two hands with `|`, add a card to a hand with `|`</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span> <span style="color:#f92672">|</span> b<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span> <span style="color:#f92672">=</span> Hand(a<span style="color:#f92672">.</span>cards <span style="color:#f92672">|</span> b<span style="color:#f92672">.</span>cards)
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span> <span style="color:#f92672">|</span> c<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span> <span style="color:#f92672">=</span> Hand(a<span style="color:#f92672">.</span>cards <span style="color:#f92672">|</span> bit(c))
</span></span><span style="display:flex;"><span>c<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span> <span style="color:#f92672">|</span> h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span> <span style="color:#f92672">=</span> h <span style="color:#f92672">|</span> c
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># interset two hands with `&amp;`</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span> <span style="color:#f92672">&amp;</span> b<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span> <span style="color:#f92672">=</span> Hand(a<span style="color:#f92672">.</span>cards <span style="color:#f92672">&amp;</span> b<span style="color:#f92672">.</span>cards)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># fetch cards within a suit range with `&amp;`</span>
</span></span><span style="display:flex;"><span>h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span> <span style="color:#f92672">&amp;</span> s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span> <span style="color:#f92672">=</span> Hand(h<span style="color:#f92672">.</span>cards <span style="color:#f92672">&amp;</span> bits(s))
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span> <span style="color:#f92672">&amp;</span> h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span> <span style="color:#f92672">=</span> h <span style="color:#f92672">&amp;</span> s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># more new dispatches</span>
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>intersect(s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>, h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>) <span style="color:#f92672">=</span> h <span style="color:#f92672">&amp;</span> s
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>intersect(h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>, s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>) <span style="color:#f92672">=</span> intersect(s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>, h<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># range operators for our suit and cards</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>(rr<span style="color:#f92672">::</span><span style="color:#66d9ef">OrdinalRange</span>{<span style="color:#f92672">&lt;:</span><span style="color:#66d9ef">Integer</span>}, s<span style="color:#f92672">::</span><span style="color:#66d9ef">Suit</span>) <span style="color:#f92672">=</span> Hand(Card(r,s) <span style="color:#66d9ef">for</span> r <span style="color:#66d9ef">in</span> rr)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">..</span>(r<span style="color:#f92672">::</span><span style="color:#66d9ef">Integer</span>, c<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span>) <span style="color:#f92672">=</span> (r<span style="color:#f92672">:</span>rank(c))<span style="color:#f92672">*</span>suit(c)
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">..</span>(a<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span>, b<span style="color:#f92672">::</span><span style="color:#66d9ef">Card</span>) <span style="color:#f92672">=</span> suit(a) <span style="color:#f92672">==</span> suit(b) <span style="color:#f92672">?</span> rank(a)<span style="color:#f92672">..</span>b <span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  throw(<span style="color:#66d9ef">ArgumentError</span>(<span style="color:#e6db74">&#34;card ranges need matching suits: </span><span style="color:#e6db74">$a</span><span style="color:#e6db74"> vs </span><span style="color:#e6db74">$b</span><span style="color:#e6db74">&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># FINALLY, we create a deck, which contains 52 unique cards</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> deck <span style="color:#f92672">=</span> Hand(Card(r,s) <span style="color:#66d9ef">for</span> s <span style="color:#66d9ef">in</span> suits <span style="color:#66d9ef">for</span> r <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">14</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># An empty hand can be represented as 0</span>
</span></span><span style="display:flex;"><span>Base<span style="color:#f92672">.</span>empty(<span style="color:#f92672">::</span><span style="color:#66d9ef">Type</span>{<span style="color:#66d9ef">Hand</span>}) <span style="color:#f92672">=</span> Hand(zero(<span style="color:#66d9ef">UInt64</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use `rand` to get a random subset of the deck</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># we use @eval to interpolate all cards into this expression then evaluate it</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@eval</span> Base<span style="color:#f92672">.</span>rand(<span style="color:#f92672">::</span><span style="color:#66d9ef">Type</span>{<span style="color:#66d9ef">Hand</span>}) <span style="color:#f92672">=</span> Hand(<span style="color:#f92672">$</span>(deck<span style="color:#f92672">.</span>cards) <span style="color:#f92672">&amp;</span> rand(<span style="color:#66d9ef">UInt64</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In Julia, a function ends with `!` indicates that it&#39;s an in-place update function</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Here we define a `deal!` function to fill hands based on specified `counts` layout</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> deal!(counts<span style="color:#f92672">::</span><span style="color:#66d9ef">Vector</span>{<span style="color:#f92672">&lt;:</span><span style="color:#66d9ef">Integer</span>}, hands<span style="color:#f92672">::</span><span style="color:#66d9ef">AbstractArray</span>{<span style="color:#66d9ef">Hand</span>}, offset<span style="color:#f92672">::</span><span style="color:#66d9ef">Int</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> rank <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">14</span>, suit <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> true
</span></span><span style="display:flex;"><span>      hand <span style="color:#f92672">=</span> rand(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> counts[hand] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        counts[hand] <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        hands[offset <span style="color:#f92672">+</span> hand] <span style="color:#f92672">|=</span> Card(rank, suit)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> hands
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Now let&#39;s define our `deal` function. It will deal cards to 4 people with the given count</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Default dispatch when no argument provided</span>
</span></span><span style="display:flex;"><span>deal() <span style="color:#f92672">=</span> deal!(fill(<span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">4</span>), fill(empty(Hand), <span style="color:#ae81ff">4</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a dispatch for `deal` when an `n` Int is provided</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> deal(n<span style="color:#f92672">::</span><span style="color:#66d9ef">Int</span>)
</span></span><span style="display:flex;"><span>  counts <span style="color:#f92672">=</span> fill(<span style="color:#ae81ff">0x0</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>  hands <span style="color:#f92672">=</span> fill(empty(Hand), <span style="color:#ae81ff">4</span>, n)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n
</span></span><span style="display:flex;"><span>    deal!(fill!(counts, <span style="color:#ae81ff">13</span>), hands, <span style="color:#ae81ff">4</span>(i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> permutedims(hands)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># calculate the points of a given hand</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> points(hand<span style="color:#f92672">::</span><span style="color:#66d9ef">Hand</span>)
</span></span><span style="display:flex;"><span>  p <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> rank <span style="color:#f92672">=</span> <span style="color:#ae81ff">11</span><span style="color:#f92672">:</span><span style="color:#ae81ff">14</span>, suit <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>    card <span style="color:#f92672">=</span> Card(rank, suit)
</span></span><span style="display:flex;"><span>    p <span style="color:#f92672">+=</span> (rank<span style="color:#f92672">-</span><span style="color:#ae81ff">10</span>)<span style="color:#f92672">*</span>(card <span style="color:#66d9ef">in</span> hand)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div>
</content>
<p>
  
  <a href="https://devpoga.org/tags/notes/">#Notes</a>
  
  <a href="https://devpoga.org/tags/programming/">#programming</a>
  
  <a href="https://devpoga.org/tags/julia/">#Julia</a>
  
</p>

  </main>
  <footer><hr />
<h2>Hi, I'm Poga</h2>
<p>
You will want to follow me on <a href="https://twitter.com/devpoga">Twitter</a>.
</p>
Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
